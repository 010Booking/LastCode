<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>stART::맨끝줄소년</title>
     <!-- Favicon-->
     <link rel="icon" href="image/x-icon.png" />
     <link rel="apple-touch-icon" href="image/x-icon.png" />     

    <!-- Bootstrap icons-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css">
    <!--google font-->
    <link
      href="https://fonts.googleapis.com/css?family=Song+Myung|Libre+Barcode+39|Nanum+Gothic+Coding|DM+Serif+Display|Noto+Serif+KR:wght@500;600&display=swap"
      rel="stylesheet"
    />
    <!-- Fire Base-->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <!-- Firebase 데이터 삽입을 위한 JavaScript 코드 -->
    <script>
      //  web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyA4rOYodV29z8d4_O4ewTMV1qQDDWhfeho",
        authDomain: "start-ba2c0.firebaseapp.com",
        projectId: "start-ba2c0",
        storageBucket: "start-ba2c0.appspot.com",
        messagingSenderId: "38449035061",
        appId: "1:38449035061:web:fec9627e6bf3eab1b53e7c",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      // Get a reference to the database service
      var database = firebase.database();
    </script>
    <!-- Firestore Library 추가 -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </head>
</html>
<body class="d-flex flex-column">
  <main class="flex-shrink-0">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg bg-white">
      <div class="container px-5">
        <a class="start" href="index.html">stART</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link myungjo" href="Booking.html"
                >예매하기</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link myungjo" href="manageBooking.html"
                >예매 확인/취소</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link myungjo" href="faq.html">FAQ</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Page content-->
    <section class="py-5 myungjo">
      <div class="container px-5 center">
        <div class="infoBox py-5 px-4">
          <!--공연정보 요약-->
          <div class="row">
            <div class="posterbox col-lg-4 m-2">
              <img class="posterImg" src="https://tumblbug-psi.imgix.net/ecb5f2d41403eeada85f3ca258f97370a82f873a/7ae757732bce4e84faa3c4140ebbe61b6fa0058d/c01a5aaf765544642ef04359d9184a4580372fec/89492b93-1f52-4b74-9e2f-b6a809014123.jpg?ixlib=rb-1.1.0&w=1240&auto=format%2C%20compress&lossless=true&ch=save-data&s=8cdd59ff025c301795bc99c2fe1c751c" alt="연극 <맨끝줄소년>">
            </div>
            <div class="info_summary col-lg-8 m-3">
              <div class="mb-3">
                <span class="title">연극&nbsp;&nbsp;&nbsp;<맨 끝줄 소년></span>
              </div>
              <ul class="info">
                <li class="infoItem">
                  <strong class="infoLabel">장소</strong>
                  <div class="infoDesc"><p class="infoText">이화여자대학교 생활환경관 소극장</p></div>
                </li>
                <li class="infoItem">
                  <strong class="infoLabel">공연기간</strong>
                  <div class="infoDesc"><p class="infoText">2024.02.15~2024.02.17</p></div>
                </li>
                <li class="infoItem">
                  <strong class="infoLabel">공연시간</strong>
                  <div class="infoDesc"><p class="infoText">120분</p></div>
                </li>
                <li class="infoItem">
                  <strong class="infoLabel">가격</strong>
                  <div class="infoDesc"><p class="infoText">전좌석 00000원</p></div>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <form id="userForm" data-sb-form-api-token="API_TOKEN">
          
          <div class="dateBox py-5 px-4">
            <div class="row selectTitle">
              <h5 class="col-lg-4 px-5">날짜선택</h5><h5 class="col-lg-4 px-5">회차선택</h5>
            </div>
            <div class="row mb-3">
              <div class="datelistBox col-lg-4">
                <ul class="datelist">
                  <li class="mb-3">
                    <input type="radio" class="btn-check" name="date" id="option1" value="240215" autocomplete="off" checked>
                    <label class="btn" for="option1"><span class="datetext">2024년 2월 15일 (목)</span></label>
                  </li>
                  <li class="mb-3">
                    <input type="radio" class="btn-check" name="date" id="option2" value="240216" autocomplete="off">
                    <label class="btn" for="option2"><span class="datetext">2024년 2월 16일 (금)</span></label>
                  </li>
                  <li class="mb-3">
                    <input type="radio" class="btn-check" name="date" id="option3" value="240217" autocomplete="off">
                    <label class="btn" for="option3"><span class="datetext">2024년 2월 17일 (토)</span></label>
                  </li>
                </ul>
              </div>
              <div class="datelistBox col-lg-4">
                <ul class="datelist">
                  <li class="mb-3">
                    <input type="radio" class="btn-check" name="time" id="option" autocomplete="off" checked>
                    <label class="btn" for="option" value="1회차"><span class="datetext">1회차 20:00</span></label>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="inputBox bg-light rounded-3 mb-5">
            <div class="infoDesc"><p class="infoText">예매 매수</p></div>
            <div class="mb-3">
              <select class="form-select" id="floatingSelect">
                <option value="1" selected>1매</option>
                <option value="2">2매</option>
                <option value="3">3매</option>
                <option value="4">4매</option>
                <option value="5">5매</option>
                <option value="6">6매</option>
                <option value="7">7매</option>
                <option value="8">8매</option>
                <option value="9">9매</option>
              </select>
            </div>
          </div>

          <div class="inputBox bg-light rounded-3 mb-5">
            <div class="infoDesc"><p class="infoText">예매자명</p></div>
            <!-- 예매자명 입력란 -->
            <div class="form-floating mb-3">
              <input
                class="form-control"
                id="reservationName"
                type="text"
                placeholder="예매자명"
                data-sb-validations="required" />
              <label for="reservationName">홍길동</label>
              <div class="invalid-feedback" data-sb-feedback="reservationName:required">
                예매자명을 입력해 주세요.
              </div>
            </div>  
          </div>

          <div class="inputBox bg-light rounded-3 mb-5">
            <div class="infoDesc"><p class="infoText">이메일</p></div>
            <!-- Email address input-->
            <div class="form-floating mb-3">
              <input
                class="form-control"
                id="email"
                type="email"
                placeholder="name@example.com"
                data-sb-validations="required,email"
              />
              <label for="email">lastcode@gmail.com</label>
              <div
                class="invalid-feedback"
                data-sb-feedback="email:required"
              >
                이메일을 입력해 주세요.
              </div>
              <div class="invalid-feedback" data-sb-feedback="email:email">
                이메일 형식이 올바르지 않습니다.
              </div>
            </div>
          </div>

          <div class="inputBox bg-light rounded-3 mb-5">
            <div class="infoDesc"><p class="infoText">연락처</p></div>
            <div class="form-floating mb-3">
              <input
                class="form-control"
                id="phoneNumber"
                type="tel"
                placeholder="전화번호"
                data-sb-validations="required" />
              <label for="phoneNumber">01012341234</label>
              <div class="invalid-feedback" data-sb-feedback="phoneNumber:required">
                연락처를 입력해 주세요.
              </div>
              <div class="invalid-feedback" data-sb-feedback="phoneNumber:format">
                숫자만 입력해 주세요.
              </div>
            </div>
          </div>

          <div class="d-flex justify-content-center">
            <button type="submit" class="btn btn-dark">예매하기</button>
          </div>
        </form>
      </div>
    </section>

    <script>
      document.getElementById("userForm").addEventListener("submit", function (event) {
        event.preventDefault();

        date=document.querySelector('input[name="date"]:checked').value

        if(date=="240215"){
          var formData = {
          email: document.getElementById("email").value,  
          reservationName: document.getElementById("reservationName").value,
          phoneNumber: document.getElementById("phoneNumber").value,
          240215: document.getElementById("floatingSelect").value,
          240216: 0,
          240217: 0
          };
        }else if(date=="240216"){
          var formData = {
          email: document.getElementById("email").value,  
          reservationName: document.getElementById("reservationName").value,
          phoneNumber: document.getElementById("phoneNumber").value,
          240215: 0,
          240216: document.getElementById("floatingSelect").value,
          240217: 0
          };
        }else if(date=="240217"){
          var formData = {
          email: document.getElementById("email").value,  
          reservationName: document.getElementById("reservationName").value,
          phoneNumber: document.getElementById("phoneNumber").value,
          240215: 0,
          240216: 0,
          240217: document.getElementById("floatingSelect").value,
          };
        }

        // Store data in Firebase
        var reservationsRef = database.ref("BookingList");
        reservationsRef.push(formData)
          .then(function () {
            console.log("Data successfully stored in Firebase!");
            // You can add further actions or redirects here
          })
          .catch(function (error) {
            console.error("Error storing data in Firebase: ", error);
          });
      });
    </script>


  </main>
</body>
